# Тестовое задание в SkyEng


## Задание 1. Спроектировать схему БД для хранения библиотеки.

Результат: https://www.db-fiddle.com/f/oTqUodUdaV337kQfwh8jTW/5 

## Задание 2. Реализовать счетчик вызова скрипта.

 Было принято решение, хранить данные в файле.

1. Основная проблема это совместный доступ к файлу несколькими потоками, если одновременно 2 потока прочитают число, а потом запишут, то получим +1 вместо +2. Самое простое решение - это локать файл перед чтением и снимать лок после записи. Но, глобальные локи никому не нужны, т.к. могут привести к непредвиденным последствиям. Например, если скрипт этот связан с загрузкой веб страницы, пользователь увидев тормоза, обязательно нажмет F5, запустив еще один вызов и таким образом только усугубив все. В качестве решение данной проблемы возможно использовать несколько файлов. Программно определить правила записи и контроля над параллельным доступом и дополнительно реализовать скрипт сбора счетчиков в один файл.

2. Если правильно реализовать счетчики используя несколько файлов и запрограммированную логику блокировки то данных подход может выдержать достаточно большую нагрузку. [Пример реализации](./task2)

3. В качестве альтернативы мы можем использовать СУБД и написать нативную процедуру инкрементирования счетчика, либо использовать Redis в качестве хранилища счетчика. Обе эти технологии позволят решить проблему с конкурентными запросами нативно, а также могут использоваться в распределенной среде, когда скрипты вызываются на разных машинах.
